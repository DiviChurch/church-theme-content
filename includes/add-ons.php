<?php/** * Add-ons * * Global functions pertaining to add-ons. * * @package    Church_Theme_Content * @subpackage Admin * @copyright  Copyright (c) 2014, churchthemes.com * @link       https://github.com/churchthemes/church-theme-content * @license    http://www.gnu.org/licenses/old-licenses/gpl-2.0.html * @since      1.2 */// No direct accessif ( ! defined( 'ABSPATH' ) ) exit;/************************************************* * REGISTRATION *************************************************//** * Register Add-on * * An add-on can register itself using this function. * * Add-on data is added to a global array with other add-ons. * This array is then used to handle License Key settings, one-click updates, expiration notices, etc. * * See admin/edd-license.php. * * @since 1.2 * @param array $config Add-on data including what is necessary for EDD Software Licensing * @global array $ctc_add_ons */function ctc_register_add_on( $args ) {	global $ctc_add_ons;	// Prepare array to receive add-ons	if ( ! isset( $ctc_add_ons ) ) {		$ctc_add_ons = array();	}	// Add add-on to global	if ( ! empty( $args['plugin_file'] ) ) {		// Store plugin's directory and main file		// Ensure it is plugin-name/plugin-name.php and not absolute path		// This is necessary for some thing, like plugin_action_links filter		$args['plugin_file'] = plugin_basename( $args['plugin_file'] );		// Plugin's directory name (e.g. plugin-name)		// This serves as a nice clean, unique slug -- good for use in settings		$args['plugin_dir'] = dirname( $args['plugin_file'] ) ;		// Get plugin data		// wp-admin/includes/plugin.php is already included by Church_Theme_Content class		$plugin_data = current( get_plugins( '/' . $args['plugin_dir'] ) );		// Plugin name		$args['name'] = $plugin_data['Name'];		$args['name_short'] = str_replace( CTC_NAME . ' - ', '', $args['name'] ); // without "Church Theme Content - " prefix		// Add add-on to global array		$ctc_add_ons[$args['plugin_dir']] = $args;	}}